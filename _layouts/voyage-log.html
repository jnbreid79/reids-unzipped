<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Voyage Log ‚Äî Reid's Unzipped</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@200;300;400;500&family=Merriweather:ital,wght@0,300;0,400;1,300&display=swap" rel="stylesheet">
<style>
  :root {
    --navy:      #1a3a5c;
    --navy-mid:  #1f4a73;
    --blue:      #2d6a9f;
    --ice:       #b8d4e8;
    --ice-light: #deedf7;
    --white:     #f8fbfd;
    --text:      #1a2a38;
    --muted:     #5a7a96;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Merriweather', Georgia, serif;
    background: var(--white);
    color: var(--text);
    font-size: 16px;
    line-height: 1.7;
  }

  /* =====================================================================
     MASTHEAD  (identical to homepage & post layout)
     ===================================================================== */
  .masthead {
    background: var(--navy);
    border-bottom: 3px solid var(--ice);
    padding: 0 1.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 64px;
    position: sticky;
    top: 0;
    z-index: 9000;
    isolation: isolate;
  }

  .masthead-logo {
    display: flex;
    align-items: center;
    text-decoration: none;
  }

  .hamburger {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
    display: flex;
    flex-direction: column;
    gap: 5px;
    z-index: 300;
  }
  .hamburger span {
    display: block;
    width: 24px; height: 2px;
    background: var(--ice);
    transition: all 0.3s ease;
    transform-origin: center;
  }
  .hamburger.open span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
  .hamburger.open span:nth-child(2) { opacity: 0; transform: scaleX(0); }
  .hamburger.open span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

  .nav-dropdown {
    position: fixed;
    top: 67px; right: 0;
    width: 280px;
    background: var(--navy);
    border-left: 3px solid var(--ice);
    border-bottom: 3px solid var(--ice);
    border-bottom-left-radius: 4px;
    transform: translateX(100%);
    transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 9999;
    padding: 1rem 0;
    box-shadow: -6px 6px 24px rgba(0,0,0,0.4);
  }
  .nav-dropdown.open { transform: translateX(0); }
  .nav-dropdown a {
    display: block;
    padding: 0.75rem 1.8rem;
    color: var(--ice);
    text-decoration: none;
    font-family: 'Raleway', sans-serif;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    font-weight: 400;
    border-bottom: 1px solid rgba(184,212,232,0.08);
    transition: background 0.15s, color 0.15s;
  }
  .nav-dropdown a:hover { background: rgba(184,212,232,0.1); color: white; }
  .nav-dropdown a:last-child { border-bottom: none; }

  .nav-overlay {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 9998;
  }
  .nav-overlay.open { display: block; }

  .tracker-pill {
    font-family: 'Raleway', sans-serif;
    font-size: 0.75rem;
    color: #4cbb9a;
    letter-spacing: 0.08em;
    display: flex;
    align-items: center;
    gap: 0.4rem;
    text-decoration: none;
    padding: 0.35rem 0.8rem;
    border: 1px solid rgba(76,187,154,0.35);
    border-radius: 20px;
    transition: all 0.2s;
    white-space: nowrap;
  }
  .tracker-pill:hover { background: rgba(76,187,154,0.1); border-color: #4cbb9a; }
  .dot {
    display: inline-block;
    width: 7px; height: 7px;
    background: #4cbb9a;
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
    flex-shrink: 0;
  }
  @keyframes pulse {
    0%,100% { opacity:1; transform:scale(1); }
    50% { opacity:0.4; transform:scale(1.5); }
  }

  .zipper-svg-masthead { width: 120px; height: auto; }

  /* =====================================================================
     PAGE HERO STRIP
     ===================================================================== */
  .page-hero {
    background: linear-gradient(160deg, #0d2438 0%, #1a3a5c 50%, #1f4a73 100%);
    padding: 4rem 1.5rem 3.5rem;
    text-align: center;
    position: relative;
    overflow: hidden;
  }

  /* subtle wave texture */
  .page-hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image:
      radial-gradient(ellipse at 20% 80%, rgba(45,106,159,0.35) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 20%, rgba(31,74,115,0.4) 0%, transparent 50%);
    pointer-events: none;
  }

  .page-hero-content {
    position: relative;
    z-index: 2;
    max-width: 700px;
    margin: 0 auto;
  }

  .page-hero-eyebrow {
    font-family: 'Raleway', sans-serif;
    font-size: 0.72rem;
    text-transform: uppercase;
    letter-spacing: 0.3em;
    color: var(--ice);
    opacity: 0.7;
    margin-bottom: 1rem;
  }

  .page-hero h1 {
    font-family: 'Raleway', sans-serif;
    font-weight: 200;
    font-size: clamp(1.8rem, 5vw, 3rem);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: white;
    margin-bottom: 1rem;
    border-bottom: 2px solid rgba(184,212,232,0.4);
    padding-bottom: 1rem;
    display: inline-block;
  }

  .page-hero-desc {
    font-family: 'Merriweather', serif;
    font-style: italic;
    font-weight: 300;
    font-size: 0.95rem;
    color: var(--ice-light);
    line-height: 1.8;
    max-width: 540px;
    margin: 0 auto 2rem;
  }

  .hero-stats {
    display: flex;
    justify-content: center;
    gap: 2.5rem;
    flex-wrap: wrap;
  }
  .hero-stat {
    font-family: 'Raleway', sans-serif;
    text-align: center;
  }
  .hero-stat .n {
    display: block;
    font-size: 1.6rem;
    font-weight: 200;
    color: var(--ice);
    letter-spacing: 0.05em;
  }
  .hero-stat .l {
    font-size: 0.68rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--muted);
  }

  /* =====================================================================
     FILTERS / TAG BAR
     ===================================================================== */
  .filter-bar {
    background: var(--navy);
    border-bottom: 1px solid rgba(184,212,232,0.12);
    padding: 0.75rem 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.6rem;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  .filter-bar::-webkit-scrollbar { display: none; }

  .filter-label {
    font-family: 'Raleway', sans-serif;
    font-size: 0.68rem;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: var(--muted);
    white-space: nowrap;
    padding-right: 0.4rem;
    flex-shrink: 0;
  }

  .filter-btn {
    font-family: 'Raleway', sans-serif;
    font-size: 0.72rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--ice);
    background: none;
    border: 1px solid rgba(184,212,232,0.25);
    border-radius: 2px;
    padding: 0.3rem 0.8rem;
    cursor: pointer;
    white-space: nowrap;
    flex-shrink: 0;
    transition: all 0.18s;
  }
  .filter-btn:hover,
  .filter-btn.active {
    background: var(--ice);
    color: var(--navy);
    border-color: var(--ice);
  }

  /* =====================================================================
     MAIN GRID
     ===================================================================== */
  .log-container {
    max-width: 1160px;
    margin: 0 auto;
    padding: 2.5rem 1.5rem 4rem;
  }

  .posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 1.8rem;
  }

  /* Featured first post spans 2 cols on wide screens */
  @media (min-width: 900px) {
    .posts-grid .post-card:first-child {
      grid-column: span 2;
    }
    .posts-grid .post-card:first-child .post-card-img {
      aspect-ratio: 21/9;
    }
    .posts-grid .post-card:first-child .post-card-body {
      padding: 1.4rem 1.8rem 1.8rem;
    }
    .posts-grid .post-card:first-child .post-card-title {
      font-size: 1.3rem;
    }
    .posts-grid .post-card:first-child .post-card-excerpt {
      display: block !important;
    }
  }

  .post-card {
    background: white;
    border-radius: 3px;
    overflow: hidden;
    box-shadow: 0 2px 14px rgba(26,58,92,0.09);
    transition: transform 0.25s, box-shadow 0.25s;
    text-decoration: none;
    color: inherit;
    display: flex;
    flex-direction: column;
  }
  .post-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 28px rgba(26,58,92,0.18);
  }

  /* thumbnail */
  .post-card-img {
    width: 100%;
    aspect-ratio: 16/9;
    background: linear-gradient(135deg, var(--navy-mid), var(--blue));
    overflow: hidden;
    flex-shrink: 0;
    position: relative;
  }
  .post-card-img img {
    width: 100%; height: 100%;
    object-fit: cover;
    display: block;
    transition: transform 0.4s ease;
  }
  .post-card:hover .post-card-img img {
    transform: scale(1.04);
  }

  /* placeholder when no teaser */
  .post-card-img-placeholder {
    width: 100%; height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .post-card-img-placeholder svg {
    width: 40px; height: 40px;
    opacity: 0.3;
  }

  /* location ribbon */
  .post-card-location {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    background: linear-gradient(to top, rgba(13,36,56,0.85), transparent);
    padding: 1.2rem 0.9rem 0.5rem;
    font-family: 'Raleway', sans-serif;
    font-size: 0.68rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--ice);
  }

  /* body */
  .post-card-body {
    padding: 1.1rem 1.3rem 1.4rem;
    display: flex;
    flex-direction: column;
    flex: 1;
  }

  .post-card-meta {
    font-family: 'Raleway', sans-serif;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--muted);
    margin-bottom: 0.45rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .post-card-meta-dot {
    display: inline-block;
    width: 3px; height: 3px;
    background: var(--muted);
    border-radius: 50%;
    opacity: 0.5;
  }

  .post-card-title {
    font-family: 'Raleway', sans-serif;
    font-weight: 400;
    font-size: 1.05rem;
    color: var(--navy);
    line-height: 1.35;
    margin-bottom: 0.6rem;
  }

  .post-card-excerpt {
    font-size: 0.83rem;
    color: #4a6a80;
    line-height: 1.6;
    margin: 0;
    flex: 1;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .post-card-footer {
    margin-top: 1rem;
    padding-top: 0.8rem;
    border-top: 1px solid rgba(184,212,232,0.3);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
  }

  .post-card-tags {
    display: flex;
    gap: 0.35rem;
    flex-wrap: wrap;
    flex: 1;
    min-width: 0;
  }
  .post-card-tag {
    font-family: 'Raleway', sans-serif;
    font-size: 0.62rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--muted);
    border: 1px solid rgba(184,212,232,0.5);
    padding: 0.15rem 0.5rem;
    border-radius: 2px;
    white-space: nowrap;
  }

  .post-card-readmore {
    font-family: 'Raleway', sans-serif;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--blue);
    white-space: nowrap;
    flex-shrink: 0;
  }

  /* empty state */
  .no-posts {
    grid-column: 1 / -1;
    text-align: center;
    padding: 4rem 2rem;
    font-family: 'Raleway', sans-serif;
    color: var(--muted);
    font-size: 0.9rem;
    letter-spacing: 0.06em;
  }

  /* =====================================================================
     FOOTER  (identical to other pages)
     ===================================================================== */
  footer {
    background: var(--navy);
    color: var(--muted);
    padding: 2rem;
    text-align: center;
    border-top: 1px solid rgba(184,212,232,0.15);
    font-family: 'Raleway', sans-serif;
    font-size: 0.82rem;
    letter-spacing: 0.04em;
  }
  footer a { color: var(--ice); text-decoration: none; }
  footer a:hover { color: white; }

  /* =====================================================================
     RESPONSIVE
     ===================================================================== */
  @media (max-width: 600px) {
    .hero-stats { gap: 1.5rem; }
    .posts-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<div class="nav-overlay" id="overlay" onclick="closeMenu()"></div>

<!-- MASTHEAD -->
<div class="masthead">
  <a href="{{ '/' | relative_url }}" class="masthead-logo">
    <svg class="zipper-svg-masthead" viewBox="0 0 240 48" xmlns="http://www.w3.org/2000/svg" aria-label="Zipper">
      <line x1="26" y1="14.2" x2="50" y2="14.2" stroke="#b8d4e8" stroke-width="2.5" stroke-linecap="round"/>
      <line x1="26" y1="38"   x2="50" y2="38"   stroke="#b8d4e8" stroke-width="2.5" stroke-linecap="round"/>
      <text x="120" y="38" text-anchor="middle"
        font-family="Raleway, 'Helvetica Neue', Helvetica, Arial, sans-serif"
        font-weight="200" font-size="34" fill="#b8d4e8" letter-spacing="2">Zipper</text>
      <line x1="190" y1="26.1" x2="214" y2="26.1" stroke="#b8d4e8" stroke-width="2.5" stroke-linecap="round"/>
    </svg>
  </a>
  <div style="display:flex; align-items:center; gap:1.2rem;">
    <a href="https://forecast.predictwind.com/tracking/display/SV-Zipper" class="tracker-pill" target="_blank">
      <span class="dot"></span> Live Tracker
    </a>
    <button class="hamburger" id="hamburger" onclick="toggleMenu()" aria-label="Menu">
      <span></span><span></span><span></span>
    </button>
  </div>
</div>

<nav class="nav-dropdown" id="nav-dropdown">
  <a href="{{ '/voyage-log/' | relative_url }}" onclick="closeMenu()">Voyage Log</a>
  <a href="{{ '/crew/' | relative_url }}" onclick="closeMenu()">The Crew</a>
  <a href="{{ '/the-boat/' | relative_url }}" onclick="closeMenu()">The Boat</a>
  <a href="{{ '/supporters/' | relative_url }}" onclick="closeMenu()">Supporters</a>
</nav>

<!-- PAGE HERO -->
<div class="page-hero">
  <div class="page-hero-content">
    <div class="page-hero-eyebrow">Reid's Unzipped</div>
    <h1>Voyage Log</h1>
    <p class="page-hero-desc">
      Chronicles from 15,577 nautical miles and counting ‚Äî passages,
      anchorages, adventures ashore, and everything in between.
    </p>
    <div class="hero-stats">
      <div class="hero-stat">
        <span class="n">{{ site.posts | size }}</span>
        <span class="l">Log entries</span>
      </div>
      <div class="hero-stat">
        <span class="n">15,577</span>
        <span class="l">Nautical miles</span>
      </div>
      <div class="hero-stat">
        <span class="n">4</span>
        <span class="l">Oceans crossed</span>
      </div>
    </div>
  </div>
</div>

<!-- FILTER BAR -->
{% assign all_tags = site.posts | map: "tags" | join: "," | split: "," | uniq | sort %}
<div class="filter-bar" id="filter-bar">
  <span class="filter-label">Filter:</span>
  <button class="filter-btn active" data-tag="all" onclick="filterPosts('all', this)">All</button>
  {% for tag in all_tags %}
    {% assign t = tag | strip %}
    {% if t != "" %}
      <button class="filter-btn" data-tag="{{ t }}" onclick="filterPosts('{{ t }}', this)">{{ t }}</button>
    {% endif %}
  {% endfor %}
</div>

<!-- POSTS GRID -->
<div class="log-container">
  <div class="posts-grid" id="posts-grid">

    {% for post in site.posts %}
    <a href="{{ post.url | relative_url }}"
       class="post-card"
       data-tags="{{ post.tags | join: ' ' }}"
       data-date="{{ post.date | date: '%Y-%m-%d' }}">

      <!-- thumbnail -->
      <div class="post-card-img">
        {% if post.header.teaser %}
          <img src="{{ post.header.teaser }}" alt="{{ post.title }}" loading="lazy">
        {% else %}
          <div class="post-card-img-placeholder">
            <svg viewBox="0 0 24 24" fill="none" stroke="#b8d4e8" stroke-width="1.5">
              <path d="M3 17l4-4 4 4 5-6 5 6"/>
              <circle cx="8" cy="8" r="2"/>
            </svg>
          </div>
        {% endif %}
        {% if post.location %}
        <div class="post-card-location">üìç {{ post.location }}</div>
        {% endif %}
      </div>

      <!-- body -->
      <div class="post-card-body">
        <div class="post-card-meta">
          <span>{{ post.date | date: "%-d %b %Y" }}</span>
          {% if post.author %}
          <span class="post-card-meta-dot"></span>
          <span>{{ post.author }}</span>
          {% endif %}
        </div>

        <div class="post-card-title">{{ post.title }}</div>

        {% if post.excerpt %}
        <p class="post-card-excerpt">{{ post.excerpt | strip_html | strip }}</p>
        {% endif %}

        <div class="post-card-footer">
          <div class="post-card-tags">
            {% for tag in post.tags limit:3 %}
            <span class="post-card-tag">{{ tag }}</span>
            {% endfor %}
          </div>
          <span class="post-card-readmore">Read ‚Üí</span>
        </div>
      </div>
    </a>
    {% endfor %}

  </div><!-- /posts-grid -->
</div><!-- /log-container -->

<!-- FOOTER -->
<footer>
  <div style="margin-bottom:0.8rem;">
    <a href="https://forecast.predictwind.com/tracking/display/SV-Zipper" target="_blank">PredictWind Tracker</a>
    &nbsp;¬∑&nbsp;
    <a href="{{ '/voyage-log/' | relative_url }}">Voyage Log</a>
    &nbsp;¬∑&nbsp;
    <a href="{{ '/crew/' | relative_url }}">The Crew</a>
    &nbsp;¬∑&nbsp;
    <a href="{{ '/supporters/' | relative_url }}">Supporters</a>
  </div>
  ¬© Reid's Unzipped ‚Äî Reid family cruising the world on Zipper
</footer>

<script>
  // ‚îÄ‚îÄ Hamburger nav ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  window.closeMenu = function() {
    document.getElementById('nav-dropdown').classList.remove('open');
    document.getElementById('hamburger').classList.remove('open');
    document.getElementById('overlay').classList.remove('open');
  };
  window.toggleMenu = function() {
    const menu = document.getElementById('nav-dropdown');
    if (menu.classList.contains('open')) { window.closeMenu(); }
    else {
      menu.classList.add('open');
      document.getElementById('hamburger').classList.add('open');
      document.getElementById('overlay').classList.add('open');
    }
  };

  // ‚îÄ‚îÄ Tag filter ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  window.filterPosts = function(tag, btn) {
    // Update active button
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');

    const cards = document.querySelectorAll('#posts-grid .post-card');
    let visible = 0;

    cards.forEach(card => {
      const tags = card.dataset.tags || '';
      const show = tag === 'all' || tags.split(' ').includes(tag);
      card.style.display = show ? '' : 'none';
      if (show) visible++;
    });

    // Show/hide no-results message
    let noResult = document.getElementById('no-posts-msg');
    if (visible === 0) {
      if (!noResult) {
        noResult = document.createElement('div');
        noResult.id = 'no-posts-msg';
        noResult.className = 'no-posts';
        noResult.textContent = 'No posts found for this filter.';
        document.getElementById('posts-grid').appendChild(noResult);
      }
      noResult.style.display = '';
    } else if (noResult) {
      noResult.style.display = 'none';
    }

    // Re-apply featured-card class only to first visible card on wide screens
    cards.forEach(c => c.classList.remove('featured'));
    const firstVisible = Array.from(cards).find(c => c.style.display !== 'none');
    if (firstVisible) firstVisible.classList.add('featured');
  };
</script>
</body>
</html>
